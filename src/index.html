<!doctype html>
<html lang="en-US">
  <head>
    <%= t.include("partials/_head.html", grunt.data.json) %>
    <% if (json.project.production && !json.project.embedded) { %>
      <%= t.include("partials/_dataLayer.html") %>
      <%= t.include("partials/_gtm.html") %>
    <% } %>
    <link rel="stylesheet" type="text/css" href="style.css">
  </head>
  <body>
    <% if (json.project.production && !json.project.embedded) { %>
      <%= t.include("partials/_gtmNoScript.html") %>
    <% } %>
    <responsive-child>
      <!-- content goes here -->
      <h2>Public School closures:</h2>

        <div class="filter">
          <p>Click to filter closures by county:</p>
           <% var counties = [];
           json.public.sort(function(a, b) { return a.order - b.order }).forEach(function(item, i) {
             if(item.county) {

               if( counties.includes( item.county ) ) {

               } else {
                 counties.push( item.county );
               }

             }
           }); %>

           <% counties.forEach(function(item, i){ %>
             <%= t.include("partials/_countyNav.html", { item: item, index: i }) %>
           <% }) %>
        </div>

      <div>
        <% json.public.sort(function(a, b) { return a.order - b.order }).forEach(function(item, i) { %>
          <%= t.include("partials/_district.html", { item: item, index: i }) %>
        <% }) %>

        <% json.public.sort(function(a, b) { return a.order - b.order }).forEach(function(item, i) { %>
          <%= t.include("partials/_school.html", { item: item, index: i }) %>
        <% }) %>
      </div>

    </responsive-child>

    <script src="app.js" async></script>
    <% if (json.project.production) { %>
    <%= !json.project.embedded ? t.include("partials/_analytics.html") : "" %>
    <%= t.include("partials/_workHere.html") %>
    <% } %>
  </body>
</html>
